{% extends 'base.html' %} {% block title %}| Departments {% endblock %}

{% block content %}
<h4>Departments</h4>
<a class="btn btn-success mb-3" href="{{ url_for('main.add_department') }}">Add Department</a>
<table class="table table-striped table-hover">

  <thead class="table-dark">
    <tr><th>Name</th><th>Description</th><th># Doctors</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for d in departments %}
    <tr>
      <td>{{ d.name }}</td>
      <td>{{ d.description }}</td>
      <td>{{ d.doctors.count() }}</td>
      <td>
        <a class="btn btn-sm btn-primary" href="{{ url_for('main.edit_department', dept_id=d.id) }}">Edit</a>
        <form method="post" action="{{ url_for('main.delete_department', dept_id=d.id) }}" style="display:inline">
          <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
          <button class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
